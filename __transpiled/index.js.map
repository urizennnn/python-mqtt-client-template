{"version":3,"file":"index.js","sources":["../components/TopicFunction.js","../template/index.js"],"sourcesContent":["/*\r\n * This component returns a block of functions that user can use to send messages to specific topic.\r\n * As input it requires a list of Channel models from the parsed AsyncAPI document\r\n */\r\nexport function TopicFunction({ channels }) {\r\n  const topicsDetails = getTopics(channels)\r\n  let functions = ''\r\n\r\n  topicsDetails.forEach((t) => {\r\n    functions += `def send${t.name}(self, id):\r\n        topic = \"${t.topic}\"\r\n        self.client.publish(topic, id)\\n`\r\n  })\r\n\r\n  return functions\r\n}\r\n\r\n/*\r\n * This function returns a list of objects, one for each channel with two properties, name and topic\r\n * name - holds information about the operationId provided in the AsyncAPI document\r\n * topic - holds information about the address of the topic\r\n *\r\n * As input it requires a list of Channel models from the parsed AsyncAPI document\r\n */\r\nfunction getTopics(channels) {\r\n  const channelsCanSendTo = channels\r\n  let topicsDetails = []\r\n\r\n  channelsCanSendTo.forEach((ch) => {\r\n    const topic = {}\r\n    const operationId = ch.operations().filterByReceive()[0].id()\r\n    topic.name = operationId.charAt(0).toUpperCase() + operationId.slice(1)\r\n    topic.topic = ch.address()\r\n\r\n    topicsDetails.push(topic)\r\n  })\r\n\r\n  return topicsDetails\r\n}\r\n","import { File, Text } from '@asyncapi/generator-react-sdk'\r\nimport { TopicFunction } from '../components/TopicFunction'\r\n\r\nexport default function ({ asyncapi, params }) {\r\n  return (\r\n    <File name=\"client.py\">\r\n      <Text newLines={2}>import paho.mqtt.client as mqtt</Text>\r\n\r\n      <Text newLines={2}>mqttBroker = \"test.mosquitto.org\"</Text>\r\n\r\n      <Text newLines={2}>class {asyncapi.info().title().replaceAll(' ', '')}Client:</Text>\r\n\r\n      <Text indent={2} newLines={2}>\r\n        {`def __init__(self):\r\n            self.client = mqtt.Client()\r\n            self.client.connect(mqttBroker)`}\r\n      </Text>\r\n\r\n      <Text indent={2}>\r\n        <TopicFunction channels={asyncapi.channels().filterByReceive()} />\r\n      </Text>\r\n    </File>\r\n  )\r\n}\r\n"],"names":["TopicFunction","channels","topicsDetails","getTopics","functions","forEach","t","name","topic","channelsCanSendTo","ch","operationId","operations","filterByReceive","id","charAt","toUpperCase","slice","address","push","asyncapi","params","_jsxs","File","children","_jsx","Text","newLines","info","title","replaceAll","indent"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACO,SAASA,aAAaA,CAAC;AAAEC,EAAAA,QAAAA;AAAS,CAAC,EAAE;AAC1C,EAAA,MAAMC,aAAa,GAAGC,SAAS,CAACF,QAAQ,CAAC,CAAA;EACzC,IAAIG,SAAS,GAAG,EAAE,CAAA;AAElBF,EAAAA,aAAa,CAACG,OAAO,CAAEC,CAAC,IAAK;AAC3BF,IAAAA,SAAS,IAAK,CAAA,QAAA,EAAUE,CAAC,CAACC,IAAK,CAAA;AACnC,iBAAmBD,EAAAA,CAAC,CAACE,KAAM,CAAA;AAC3B,wCAAyC,CAAA,CAAA;AACvC,GAAC,CAAC,CAAA;AAEF,EAAA,OAAOJ,SAAS,CAAA;AAClB,CAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASD,SAASA,CAACF,QAAQ,EAAE;EAC3B,MAAMQ,iBAAiB,GAAGR,QAAQ,CAAA;EAClC,IAAIC,aAAa,GAAG,EAAE,CAAA;AAEtBO,EAAAA,iBAAiB,CAACJ,OAAO,CAAEK,EAAE,IAAK;IAChC,MAAMF,KAAK,GAAG,EAAE,CAAA;AAChB,IAAA,MAAMG,WAAW,GAAGD,EAAE,CAACE,UAAU,EAAE,CAACC,eAAe,EAAE,CAAC,CAAC,CAAC,CAACC,EAAE,EAAE,CAAA;AAC7DN,IAAAA,KAAK,CAACD,IAAI,GAAGI,WAAW,CAACI,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,EAAE,GAAGL,WAAW,CAACM,KAAK,CAAC,CAAC,CAAC,CAAA;AACvET,IAAAA,KAAK,CAACA,KAAK,GAAGE,EAAE,CAACQ,OAAO,EAAE,CAAA;AAE1BhB,IAAAA,aAAa,CAACiB,IAAI,CAACX,KAAK,CAAC,CAAA;AAC3B,GAAC,CAAC,CAAA;AAEF,EAAA,OAAON,aAAa,CAAA;AACtB;;ACnCe,cAAU,EAAA;EAAEkB,QAAQ;AAAEC,EAAAA,MAAAA;AAAO,CAAC,EAAE;EAC7C,oBACEC,eAAA,CAACC,sBAAI,EAAA;AAAChB,IAAAA,IAAI,EAAC,WAAW;IAAAiB,QAAA,EAAA,cACpBC,cAAA,CAACC,sBAAI,EAAA;AAACC,MAAAA,QAAQ,EAAE,CAAE;AAAAH,MAAAA,QAAA,EAAC,iCAAA;AAA+B,KAAM,CAAC,eAEzDC,cAAA,CAACC,sBAAI,EAAA;AAACC,MAAAA,QAAQ,EAAE,CAAE;AAAAH,MAAAA,QAAA,EAAC,qCAAA;AAAiC,KAAM,CAAC,eAE3DF,eAAA,CAACI,sBAAI,EAAA;AAACC,MAAAA,QAAQ,EAAE,CAAE;MAAAH,QAAA,EAAA,CAAC,QAAM,EAACJ,QAAQ,CAACQ,IAAI,EAAE,CAACC,KAAK,EAAE,CAACC,UAAU,CAAC,GAAG,EAAE,EAAE,CAAC,EAAC,SAAO,CAAA;AAAA,KAAM,CAAC,eAEpFL,cAAA,CAACC,sBAAI,EAAA;AAACK,MAAAA,MAAM,EAAE,CAAE;AAACJ,MAAAA,QAAQ,EAAE,CAAE;AAAAH,MAAAA,QAAA,EACzB,CAAA;AACV;AACA,2CAAA,CAAA;AAA4C,KAChC,CAAC,eAEPC,cAAA,CAACC,sBAAI,EAAA;AAACK,MAAAA,MAAM,EAAE,CAAE;MAAAP,QAAA,eACdC,cAAA,CAACzB,aAAa,EAAA;QAACC,QAAQ,EAAEmB,QAAQ,CAACnB,QAAQ,EAAE,CAACY,eAAe,EAAC;OAAI,CAAA;AAAC,KAC9D,CAAC,CAAA;AAAA,GACH,CAAC,CAAA;AAEX;;;;"}